# 2.11 - 2.16记录

## 进展
### 课程
完成了ch0-ch8的练习 实验与编程作业。

见证了内核从一个简单的“裸机程序”演进为具备现代 OS 特性的微型系统：

* **从静态到动态的任务调度**：
    最初仅能依靠**固定内存布局**运行硬编码的用户态程序。随后，通过引入**批处理系统**初步实现了特权级隔离。在此基础上，进一步构建了**多道程序环境**，通过保存与恢复 `TaskContext`（任务上下文），实现了基于时钟中断的抢占式**任务切换**，彻底解决了单任务阻塞导致的 CPU 资源浪费。

* **地址空间的维度跨越（虚拟内存）**：
    第四章是性能与安全性的转折点。通过实现 **SV39 多级页表机制**，完成了从直接物理寻址到**虚拟内存寻址**的飞跃。这不仅实现了进程间的地址空间隔离（Isolation），还通过 `Trampoline`（蹦床页面）巧妙地处理了内核态与用户态在页表切换时的平滑过渡。

* **I/O 抽象与持久化存储**：
    第六章通过引入 **EasyFS**，为操作系统构建了文件系统栈。实现了从块设备驱动到磁盘索引节点（Inode）的层级抽象，使得内核能够通过标准化的 **I/O 接口**管理持久化数据。

* **并发原语与复杂调度**：
    第八章聚焦于**并发控制**。实现了线程抽象、互斥锁（Mutex）与信号量（Semaphore）等同步原语。这不仅要求内核具备处理竞争风险（Race Conditions）的能力，也为多核环境下的缓存一致性和调度算法优化奠定了基础。
## 收获
学习到了 操作系统的基础知识： 地址空间 进程算法 并发编程等内容。

通过AI助手的辅助 对操作系统有了更全面的认知 同时对知识点的整理更加的方便

我探索并实践了 AI 赋能的操作系统学习流。AI 助手不再仅是知识检索工具，而是成为了：

复杂逻辑的“静态分析仪”：辅助推导多级页表转换流程与 Trap 上下文切换的汇编细节，加速了对隐蔽边界情况（Edge Cases）的排查。

架构设计的设计伙伴：在设计 EasyFS 缓冲区缓存（Buffer Cache）与并发锁机制时，利用 AI 快速进行方案比选与可行性验证。

知识熵的提取器：将散落在几百个 Commit 中的底层优化细节，高效转化为结构化的技术文档与架构图谱。

## 遇到的困难
### 多维知识耦合的挑战:  
在 Ch1 的实践中，最大的挑战并非逻辑实现，而是如何处理极高密度的底层陌生概念。由于需要从零构建执行环境，我面临着从 RISC-V 汇编、SBI 规范到链接器（Linker Script）语法的全方位认知门槛。
由于软硬件交互的紧耦合特性，学习过程被迫呈现“广度优先”状态。为了实现一个简单的字符打印，必须同时打通指令集、寄存器状态、特权级切换以及内存段对齐等多个知识盲区。

### 黑盒挑战
在阅读文档的时候 实际上面对的是一个**黑盒**。 虽然有代码 但是底层的工作还是需要时间去剖析与理解

## 项目的建议
为了解决我遇到的困难以及其他人可能遇到的困难 我探索了以下的方法来加速学习的效率：

- 环境部署： 使用NixOS来部署环境

使用Nix的flake特性 制作了一个高度可还原的原子性的环境 来减少复现所需的时间

- 学习深度： 从广度优先遍历到**适当的**深度优先遍历

当引入一个新概念（如 ecall）时，自动关联其前置依赖（如特权级切换原理、寄存器传参规范）与后置应用（如系统调用实现）。

- 文档： AI助手赋能

1. 采用AI助手作为思维的 **依赖树构建器** 将每个章节拆分为 **图状的知识点** 同时在文档的开头附上**TLDR**，**思维导图**。

2. 在每一章的末尾采用**费曼学习法** 向AI助手提出可能存在的问题 并向AI助手**讲述章节的知识** 让AI助手判断用户是否正确掌握本章内容。

3. 将每个章节的专业名词以及其关系先放在文档的开头

比如VA，PA的关系 VPN与页的关系 页表项与页的关系

- 学习顺序： 从**文档驱动**到**源代码驱动**

在学习 rCore 课程时，传统的文档驱动模式在实际探索中显露出了局限性。

操作系统的核心价值在于对底层黑盒的掌控与解构。如果仅仅停留在文档描述的逻辑层，而不深入源码的实现细节，那么对于硬件行为、特权级切换以及内存布局的理解，依然会隔着一层“黑盒”迷雾。

文档仅能构建宏观框架，唯有穿透代码，才能理清底层的真实脉络。 只有通过对指令级交互和 no_std 运行时内存状态的直接观测，才能真正破除抽象带来的不确定性，掌握系统的运行本质。

- 使用自动化工具对代码中出现的类型进行建模

得益于面向对象的编程 操作系统的各个组件可以被抽象为 **类型系统**

如果能用自动化工具来构建各个结构体之间的图邻接结构 比如PhysPageNum、PageTable等的邻接关系的话 对操作系统会有一个更完全的认知
